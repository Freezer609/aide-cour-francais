<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sartre et le Surréalisme</title>
    <!-- Chargement de Tailwind CSS via CDN pour un style moderne et responsive -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuration de Tailwind pour utiliser des couleurs et polices personnalisées -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        // Polices système pour un style "Apple" : propre, moderne et lisible
                        sans: ['ui-sans-serif', 'system-ui', '-apple-system', 'BlinkMacSystemFont', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', '"Noto Sans"', 'sans-serif', '"Apple Color Emoji"', '"Segoe UI Emoji"', '"Segoe UI Symbol"', '"Noto Color Emoji"'],
                    },
                    colors: {
                        // Palette de couleurs inspirée de l'image fournie (dégradés et pastels vifs)
                        'global-bg-start': '#B7E0FF',   // Bleu clair pour le début du dégradé de fond général
                        'global-bg-end': '#FFD1E7',     // Rose clair pour la fin du dégradé de fond général

                        // Couleurs générales du texte et de l'interface
                        'text-dark': '#1C1C1E',          // Texte principal très sombre
                        'text-medium': '#8E8E93',        // Texte secondaire ou des placeholders
                        'card-bg-white': '#FFFFFF',      // Blanc pur pour les conteneurs de section principaux (cartes à l'intérieur)

                        // Couleurs d'accentuation pour les titres et boutons
                        'sartre-accent': '#FF0033',      // Rouge fluo pour Sartre (titres, boutons)
                        'surreal-accent': '#AF52DE',     // Violet vif pour le Surréalisme (titres, boutons)
                        'interaction-accent': '#007AFF', // Bleu vif pour l'interactivité (titres, boutons)

                        // Dégradés pour les cartes des SECTIONS complètes
                        'sartre-card-gradient-bg-start': '#FF8C8C', // Rouge clair vif pour les cartes Sartre
                        'sartre-card-gradient-bg-end': '#FFC0CB',   // Rose clair pour les cartes Sartre
                        'surreal-card-gradient-bg-start': '#A78BFA', // Violet clair pour les cartes Surréalisme
                        'surreal-card-gradient-bg-end': '#ADD8E6',   // Bleu ciel pour les cartes Surréalisme

                        // Interaction cards (orange doux vers rose, vert doux vers jaune) - Dégradés pour les cartes des sections interactives
                        'gen-surreal-card-start': '#F7E6D1', // Orange doux (interaction)
                        'gen-surreal-card-end': '#F7D8E6',   // Rose doux (interaction)
                        'reflect-sartre-card-start': '#D1F7E1', // Vert doux (interaction)
                        'reflect-sartre-card-end': '#E1F7D1',   // Jaune-vert doux (interaction)

                        // Couleurs pour les onglets actifs (dégradé très clair pour texte noir)
                        'tab-active-start': '#D0BFFF',  // Violet très clair (pour texte noir)
                        'tab-active-end': '#B0E0FF',    // Bleu très clair (pour texte noir)

                        // Couleurs pour le dégradé du titre de l'en-tête
                        'title-gradient-start': '#00C6FF', // Bleu vif
                        'title-gradient-end': '#AA67FF',   // Rose/Violet
                    }
                }
            }
        }
    </script>
    <!-- Styles personnalisés pour le dégradé de fond et l'animation de transition -->
    <style>
        body {
            font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";
            /* Dégradé de fond global du site */
            background: linear-gradient(to bottom right, var(--tw-colors-global-bg-start), var(--tw-colors-global-bg-end));
            color: var(--tw-colors-text-dark); /* Couleur de texte principale */
            line-height: 1.6; /* Améliore la lisibilité */
        }
        /* Classe pour la transition de l'opacité entre les sections, courte et fluide */
        .content-section {
            transition: opacity 0.3s ease-in-out;
        }
        /* Style des onglets actifs avec dégradé et texte noir */
        .tab-link.active-tab {
            background: linear-gradient(to right, var(--tw-colors-tab-active-start), var(--tw-colors-tab-active-end));
            color: var(--tw-colors-text-dark); /* Texte noir pour l'onglet actif */
            font-weight: 600; /* Plus gras */
            box-shadow: 0 4px 12px rgba(74, 0, 224, 0.2); /* Ombre subtile */
        }
        /* Style pour les onglets inactifs sur le fond blanc de l'en-tête */
        .tab-link {
            color: var(--tw-colors-text-dark); /* Texte sombre par défaut pour les onglets inactifs */
        }
        .tab-link:not(.active-tab):hover {
            background-color: #E2E8F0; /* Un gris très clair pour le hover */
            color: var(--tw-colors-text-dark); /* Conserve le texte sombre sur hover */
        }

        /* Styles pour l'animation de la Modale Freud */
        #freud-modal {
            transition: opacity 0.3s ease-out, transform 0.3s ease-out;
            opacity: 0;
            transform: translateY(20px);
        }
        #freud-modal.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        #freud-modal .fixed.inset-0.bg-black { /* Cibler l'overlay */
            transition: opacity 0.3s ease-out;
            opacity: 0;
        }
        #freud-modal.is-visible .fixed.inset-0.bg-black {
            opacity: 0.5;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col antialiased">

    <!-- En-tête du site : design minimaliste et épuré -->
    <header class="bg-card-bg-white p-4 shadow-lg rounded-b-3xl mx-auto mt-4 w-11/12 max-w-4xl">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center px-4">
            <!-- Titre du site : simple et élégant avec dégradé de texte -->
            <h1 class="text-2xl font-bold mb-2 md:mb-0 bg-gradient-to-r from-title-gradient-start to-title-gradient-end bg-clip-text text-transparent tracking-tight">Sartre et le Surréalisme</h1>
            <nav>
                <ul class="flex space-x-2 md:space-x-4 text-base font-medium">
                    <!-- Liens de navigation transformés en onglets visuels -->
                    <li><a href="#introduction" class="tab-link px-4 py-2 rounded-full transition duration-300 ease-in-out" data-target="introduction-section">Introduction</a></li>
                    <li><a href="#sartre" class="tab-link px-4 py-2 rounded-full transition duration-300 ease-in-out" data-target="sartre-section">Sartre</a></li>
                    <li><a href="#surrealism" class="tab-link px-4 py-2 rounded-full transition duration-300 ease-in-out" data-target="surrealism-section">Surréalisme</a></li>
                    <li><a href="#interaction" class="tab-link px-4 py-2 rounded-full transition duration-300 ease-in-out" data-target="interaction-section">Interaction</a></li>
                    <li><a href="#quiz" class="tab-link px-4 py-2 rounded-full transition duration-300 ease-in-out" data-target="quiz-section">Quiz</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Contenu principal : conteneur centré et spacieux -->
    <main class="container mx-auto p-6 md:p-10 flex-grow max-w-4xl">

        <!-- Section Introduction -->
        <section id="introduction-section" class="content-section bg-card-bg-white p-8 md:p-10 rounded-3xl shadow-xl mb-8 opacity-0">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-6 text-text-dark tracking-tight">Introduction</h2>
            <p class="text-base md:text-lg leading-relaxed mb-4 text-text-dark">
                Ce site explore deux mouvements intellectuels et artistiques majeurs du 20e siècle : l'<strong>Existentialisme de Jean-Paul Sartre</strong> et le <strong>Surréalisme</strong>. Bien que différents dans leurs approches, ils partagent une volonté profonde de remettre en question les conventions, d'explorer les profondeurs de l'expérience humaine et de transformer la perception du monde et de la liberté.
            </p>
            <!-- Phrase supprimée ici -->
        </section>

        <!-- Section Existentialisme de Sartre (initialement masquée) -->
        <!-- Fond de la section en blanc, et les cartes individuelles avec le dégradé rouge -->
        <section id="sartre-section" class="content-section hidden bg-card-bg-white p-8 md:p-10 rounded-3xl shadow-xl mb-8 opacity-0">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-6 text-sartre-accent tracking-tight">L'Existentialisme de Jean-Paul Sartre</h2>
            <p class="text-base md:text-lg leading-relaxed mb-6 text-text-dark">
                L'existentialisme de Sartre est une philosophie de la liberté et de la responsabilité radicale, née dans le contexte de l'après-guerre et de la remise en question des valeurs traditionnelles.
            </p>

            <div class="grid md:grid-cols-2 gap-6 md:gap-8">
                <!-- Concept 1: L'Existence précède l'Essence -->
                <div class="p-6 bg-gradient-to-br from-sartre-card-gradient-bg-start to-sartre-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-sartre-accent">L'Existence précède l'Essence</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        Pour Sartre, l'homme existe d'abord, apparaît, surgit dans le monde, et ne se définit qu'après. Il n'y a pas de nature humaine prédéfinie ou de plan divin. L'homme est ce qu'il se fait. Nous sommes entièrement responsables de ce que nous devenons par nos choix et nos actions.
                    </p>
                </div>

                <!-- Concept 2: La Liberté et la Responsabilité -->
                <div class="p-6 bg-gradient-to-br from-sartre-card-gradient-bg-start to-sartre-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-sartre-accent">La Liberté et la Responsabilité</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        L'homme est "condamné à être libre". Cette liberté absolue est source de vertige face à l'étendue des possibles. Chaque choix engage non seulement nous-mêmes, mais l'humanité entière.
                    </p>
                </div>

                <!-- Concept 3: Le Pour-soi et l'En-soi -->
                <div class="p-6 bg-gradient-to-br from-sartre-card-gradient-bg-start to-sartre-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-sartre-accent">Le Pour-soi et l'En-soi</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        Sartre distingue deux modes d'être : l'<strong>En-soi</strong> (ce qui est, la chose, l'objet, ce qui est plein et passif) et le <strong>Pour-soi</strong> (la conscience, ce qui est en manque, ce qui se projette et se fait). L'homme est Pour-soi, et par sa conscience, il confère un sens au monde.
                    </p>
                </div>

                <!-- Concept 4: Le Regard d'Autrui et les relations -->
                <div class="p-6 bg-gradient-to-br from-sartre-card-gradient-bg-start to-sartre-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-sartre-accent">Le Regard d'Autrui et les Relations</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        Quand autrui me regarde, je deviens un objet (un En-soi) pour sa conscience. C'est le sens de "L'enfer, c'est les autres" : non pas que les autres sont des bourreaux, mais qu'ils nous objectivent et nous renvoient à notre propre facticité.
                    </p>
                    <p class="text-sm leading-relaxed mt-2 text-text-dark">
                        Les relations humaines sont une lutte constante pour la liberté. Les "dérivés de l'amour" comme le <strong>sadisme</strong> (vouloir faire de l'autre une chose) et le <strong>masochisme</strong> (vouloir devenir une chose pour l'autre) sont des tentatives vouées à l'échec de résoudre cette tension.
                    </p>
                </div>

                <!-- Concept 5: L'Angoisse -->
                <div class="p-6 bg-gradient-to-br from-sartre-card-gradient-bg-start to-sartre-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-sartre-accent">L'Angoisse</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        L'<strong>angoisse</strong> est le sentiment de vertige et de responsabilité totale face à notre liberté absolue. C'est la conscience du fait que nous sommes les seuls créateurs de nos valeurs, sans appui extérieur ni excuse. Elle nous révèle notre propre liberté.
                    </p>
                </div>

                <!-- Concept 6: L'Encroûtement -->
                <div class="p-6 bg-gradient-to-br from-sartre-card-gradient-bg-start to-sartre-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-sartre-accent">L'Encroûtement</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        L'<strong>encroûtement</strong> est la tendance à se figer dans un rôle, une habitude ou une identité préétablie, refusant d'assumer sa liberté de se transformer et de se dépasser. C'est une forme de mauvaise foi où l'on se laisse définir par les autres ou par son passé.
                    </p>
                </div>

                <!-- Concept: La Mauvaise Foi -->
                <div class="p-6 bg-gradient-to-br from-sartre-card-gradient-bg-start to-sartre-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-sartre-accent">La Mauvaise Foi</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        C'est le fait de se mentir à soi-même sur sa propre liberté et responsabilité. Cela consiste à prétendre être un En-soi (déterminé, sans choix) alors que l'on est un Pour-soi (libre et responsable). C'est une fuite devant l'angoisse de la liberté.
                    </p>
                </div>
            </div>
        </section>

        <!-- Surrealism Section (initially hidden) -->
        <!-- Section background in white, and individual cards with violet/blue gradient -->
        <section id="surrealism-section" class="content-section hidden bg-card-bg-white p-8 md:p-10 rounded-3xl shadow-xl mb-8 opacity-0">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-6 text-surreal-accent tracking-tight">Le Surréalisme</h2>
            <p class="text-base md:text-lg leading-relaxed mb-6 text-text-dark">
                Né après la Première Guerre Mondiale, le surréalisme est un mouvement artistique et littéraire visant à libérer l'homme en explorant les profondeurs de l'inconscient et en défiant la logique et la raison.
            </p>

            <div class="grid md:grid-cols-2 gap-8">
                <!-- Définition du Surréalisme (première carte) -->
                <div class="p-6 bg-gradient-to-br from-surreal-card-gradient-bg-start to-surreal-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-surreal-accent">Définition du Surréalisme</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        Le Surréalisme, tel que défini par André Breton, est un automatisme psychique pur par lequel on se propose d'exprimer, soit verbalement, soit par écrit, soit de toute autre manière, le fonctionnement réel de la pensée en l'absence de tout contrôle exercé par la raison, en dehors de toute préoccupation esthétique ou morale.
                    </p>
                </div>

                <!-- Contexte et lien avec Dadaïsme -->
                <div class="p-6 bg-gradient-to-br from-surreal-card-gradient-bg-start to-surreal-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-surreal-accent">Contexte et lien avec Dadaïsme</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        Issu du <strong>Dadaïsme</strong>, le surréalisme hérite de sa révolte radicale contre les valeurs et la raison perçues comme responsables des horreurs de la guerre. Cependant, il dépasse la simple destruction dadaïste pour proposer une nouvelle voie de libération de l'homme par l'exploration de l'inconscient.
                    </p>
                </div>

                <!-- Influence de Freud et l'Inconscient -->
                <div class="p-6 bg-gradient-to-br from-surreal-card-gradient-bg-start to-surreal-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-surreal-accent">Influence de Freud (Ça, Moi, Surmoi)</h3>
                    <p id="freud-bio-text" class="text-sm leading-relaxed text-text-dark">
                        Fortement inspirés par la psychanalyse de Freud, les surréalistes cherchent à libérer le <strong>Ça</strong> (le siège des désirs et pulsions inconscients) des contraintes du <strong>Moi</strong> (la conscience rationnelle) et du <strong>Surmoi</strong> (la conscience morale et les normes sociales).
                    </p>
                    <p class="text-sm leading-relaxed mt-2 text-text-dark">
                        Leur objectif est d'accéder à la "pensée véritable" de l'homme, non censurée par la société.
                    </p>
                    <!-- Bouton pour ouvrir la modale de la biographie de Freud -->
                    <button id="openFreudModal" class="bg-surreal-accent hover:opacity-85 text-white font-bold py-2 px-4 rounded-lg mt-4 transition duration-300 ease-in-out shadow-lg transform hover:scale-105">
                        Lire la biographie de Freud
                    </button>
                </div>

                <!-- Écriture Automatique -->
                <div class="p-6 bg-gradient-to-br from-surreal-card-gradient-bg-start to-surreal-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-surreal-accent">Écriture Automatique</h3>
                    <p class="text-sm leading-relaxed text-text-dark">
                        Technique fondamentale du surréalisme, l'écriture automatique consiste à écrire le plus rapidement possible, sans contrôle de la raison, de la morale ou de l'esthétique, pour capter directement le flux de l'inconscient. Elle vise à révéler le "fonctionnement réel de la pensée".
                    </p>
                </div>

                <!-- Les Thèmes Surréalistes -->
                <div class="p-6 bg-gradient-to-br from-surreal-card-gradient-bg-start to-surreal-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-surreal-accent">Les Thèmes Surréalistes</h3>
                    <ul class="list-disc list-inside text-md leading-relaxed text-text-dark">
                        <li><strong>Le Hasard :</strong> Valorisation des coïncidences significatives ("hasard objectif") et des rencontres inattendues qui révèlent un sens caché.</li>
                        <li><strong>L'Anarchie / Révolte :</strong> Rupture avec les conventions sociales, morales et artistiques établies.</li>
                        <li><strong>La Femme Muse :</strong> Figure inspiratrice, souvent idéalisée, mystérieuse, au pouvoir subversif.</li>
                        <li><strong>Le Rêve et l'Inconscient :</strong> Exploration des mondes oniriques et des profondeurs de l'esprit, source de créativité.</li>
                        <li><strong>La Folie :</strong> Intérêt pour les états de conscience altérés, perçus comme des voies d'accès à une réalité supérieure.</li>
                        <li><strong>L'Amour Fou :</strong> Passion démesurée et irrationnelle, défiant les normes et libératrice.</li>
                        <li><strong>La Liberté :</strong> Recherche d'une liberté absolue de l'esprit et de l'expression, affranchie de toute contrainte.</li>
                    </ul>
                </div>

                <!-- Traits Majeurs -->
                <div class="p-6 bg-gradient-to-br from-surreal-card-gradient-bg-start to-surreal-card-gradient-bg-end rounded-2xl shadow-sm">
                    <h3 class="text-xl font-semibold mb-2 text-surreal-accent">Traits Majeurs</h3>
                    <ul class="list-disc list-inside text-md leading-relaxed text-text-dark">
                        <li>1. La <strong>libération des contraintes</strong>: Le surréalisme vise à affranchir l'esprit et l'expression des carcans de la logique, de la morale et des conventions sociales.</li>
                        <li>2. Les <strong>comportements propices à dévoiler le surréel dans l'existence ordinaire</strong>: Il s'agit de la recherche active de coïncidences, de rencontres fortuites et de "hasards objectifs" qui révèlent un sens caché ou une beauté inattendue dans le quotidien.</li>
                        <li>3. Une <strong>subversion radicale des valeurs et genres littéraires</strong>: Le surréalisme défie les normes établies, bouscule les hiérarchies artistiques et remet en question la raison, la moralité et les formes traditionnelles de l'art et de la littérature, prônant une liberté créatrice totale.</li>
                        <li>4. Une <strong>pratique systématique de techniques de création visant à libérer l'inconscient ou à faire surgir une surréalité imprévisible</strong>: Cela inclut des méthodes comme l'écriture automatique, les collages, les cadavres exquis, les rêves éveillés dirigés, etc., toutes conçues pour contourner la conscience rationnelle et accéder aux forces créatrices de l'inconscient.</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Interactive Section (initially hidden) -->
        <section id="interaction-section" class="content-section hidden bg-card-bg-white p-8 rounded-lg shadow-md mb-12 opacity-0">
            <h2 class="text-4xl font-semibold text-center mb-6 text-interaction-accent">Explorez par vous-même !</h2>
            <div class="flex flex-col md:flex-row gap-8">
                <!-- Générateur de phrase surréaliste -->
                <div class="flex-1 p-6 bg-gradient-to-br from-gen-surreal-card-start to-gen-surreal-card-end rounded-lg shadow-inner">
                    <h3 class="text-2xl font-bold mb-3 text-surreal-accent">Générateur de Phrase Surréaliste</h3>
                    <p class="mb-4 text-md text-text-dark">Laissez l'inconscient s'exprimer ! Cliquez pour générer une phrase automatique.</p>
                    <button id="generateSurrealistSentence" class="bg-surreal-accent hover:opacity-85 text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out shadow-lg transform hover:scale-105">
                        Générer une phrase
                    </button>
                    <p id="surrealistOutput" class="mt-6 text-xl italic text-text-dark font-semibold"></p>
                </div>

                <!-- Réflexion Existentialiste -->
                <div class="flex-1 p-6 bg-gradient-to-br from-reflect-sartre-card-start to-reflect-sartre-card-end rounded-lg shadow-inner">
                    <h3 class="text-2xl font-bold mb-3 text-sartre-accent">Réflexion Existentialiste</h3>
                    <p class="mb-4 text-md text-text-dark">Réfléchissez à votre propre liberté et responsabilité.</p>
                    <textarea id="sartreReflectionInput" class="w-full p-3 rounded-md border border-gray-300 focus:ring-2 focus:ring-sartre-accent outline-none transition duration-200 resize-y min-h-[100px]" placeholder="Qu'est-ce que la liberté signifie pour vous ?"></textarea>
                    <button id="reflectSartre" class="bg-sartre-accent hover:opacity-85 text-white font-bold py-3 px-6 rounded-lg mt-4 transition duration-300 ease-in-out shadow-lg transform hover:scale-105">
                        Partager ma réflexion
                    </button>
                    <p id="sartreQuoteOutput" class="mt-6 text-xl italic text-text-dark font-semibold hidden">
                        </p>
                    <div id="messageBox" class="hidden mt-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded-md">
                        </div>
                </div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section id="quiz-section" class="content-section hidden bg-card-bg-white p-8 md:p-10 rounded-3xl shadow-xl mb-8 opacity-0">
            <h2 class="text-3xl md:text-4xl font-bold text-center mb-6 text-interaction-accent tracking-tight">Quiz sur l'Existentialisme et le Surréalisme</h2>
            <div class="flex flex-col items-center">
                <button id="generateQuiz" class="bg-interaction-accent hover:opacity-85 text-white font-bold py-3 px-6 rounded-lg transition duration-300 ease-in-out shadow-lg transform hover:scale-105">
                    Générer un nouveau quiz
                </button>
                <p id="quiz-loading" class="mt-4 text-text-medium hidden">Génération du quiz... Veuillez patienter.</p>
                <div id="quiz-container" class="mt-8 w-full max-w-2xl">
                    <!-- Les questions du quiz seront insérées ici par JavaScript -->
                </div>
                <button id="submitQuiz" class="bg-sartre-accent hover:opacity-85 text-white font-bold py-3 px-6 rounded-lg mt-8 hidden transition duration-300 ease-in-out shadow-lg transform hover:scale-105">
                    Soumettre le quiz
                </button>
                <div id="quiz-score" class="mt-6 text-2xl font-bold text-text-dark hidden"></div>
            </div>
        </section>

    </main>

    <!-- Pied de page -->
    <footer class="bg-gray-800 text-white p-6 mt-12 rounded-t-lg">
        <div class="container mx-auto text-center text-sm">
            <p>&copy; 2025 Exploration Philosophique et Artistique. Tous droits réservés.</p>
            <p>Conçu pour comprendre Sartre et le Surréalisme.</p>
        </div>
    </footer>

    <!-- Modale Biographie Freud -->
    <div id="freud-modal" class="hidden fixed inset-0 z-40 flex items-center justify-center">
        <!-- Overlay -->
        <div class="fixed inset-0 bg-black bg-opacity-50 modal-overlay"></div>
        <!-- Contenu de la Modale -->
        <div class="bg-card-bg-white p-8 rounded-lg shadow-xl z-50 w-11/12 max-w-2xl relative">
            <h3 class="text-2xl font-bold mb-4 text-surreal-accent">Biographie de Freud</h3>
            <p class="text-base leading-relaxed text-text-dark mb-6">
                Fortement inspirés par la psychanalyse de Freud, les surréalistes cherchent à libérer le <strong>Ça</strong> (le siège des désirs et pulsions inconscients) des contraintes du <strong>Moi</strong> (la conscience rationnelle) et du <strong>Surmoi</strong> (la conscience morale et les normes sociales). Leur objectif est d'accéder à la "pensée véritable" de l'homme, non censurée par la société.
            </p>
            <button id="closeFreudModal" class="bg-surreal-accent hover:opacity-85 text-white font-bold py-2 px-4 rounded-lg transition duration-300 ease-in-out shadow-lg transform hover:scale-105">
                Retour
            </button>
        </div>
    </div>

    <!-- JavaScript pour l'interactivité des onglets et les fonctionnalités -->
    <script>
        // Fonction pour afficher des messages personnalisés (remplace alert())
        function showMessageBox(message, type = 'info') {
            const messageBox = document.getElementById('messageBox');
            messageBox.textContent = message;
            messageBox.className = 'mt-4 p-3 rounded-md'; // Réinitialise les classes
            if (type === 'error') {
                messageBox.classList.add('bg-red-100', 'border', 'border-red-400', 'text-red-700');
            } else if (type === 'success') {
                messageBox.classList.add('bg-green-100', 'border', 'border-green-400', 'text-green-700');
            } else { // info par défaut
                messageBox.classList.add('bg-blue-100', 'border', 'border-blue-400', 'text-blue-700');
            }
            messageBox.classList.remove('hidden');
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 5000); // Le message disparaît après 5 secondes
        }

        let quizData = []; // Stocke les données du quiz globalement

        // --- Gestion des onglets avec animation ---
        document.addEventListener('DOMContentLoaded', () => {
            const tabLinks = document.querySelectorAll('.tab-link');
            const contentSections = document.querySelectorAll('.content-section');
            const freudModal = document.getElementById('freud-modal');
            const openFreudModalButton = document.getElementById('openFreudModal');
            const closeFreudModalButton = document.getElementById('closeFreudModal');
            const generateQuizButton = document.getElementById('generateQuiz');
            const quizLoading = document.getElementById('quiz-loading');
            const quizContainer = document.getElementById('quiz-container');
            const submitQuizButton = document.getElementById('submitQuiz');
            const quizScoreDisplay = document.getElementById('quiz-score');


            // Fonction pour masquer toutes les sections de contenu avec fade-out
            const hideAllSections = () => {
                contentSections.forEach(section => {
                    if (!section.classList.contains('hidden')) {
                        section.style.opacity = '0'; // Commence le fade-out
                        setTimeout(() => {
                            section.classList.add('hidden'); // Cache après le fade-out
                        }, 300); // Correspond à la durée de transition CSS
                    }
                });
            };

            // Fonction pour désactiver le style actif de tous les liens d'onglet
            const deactivateAllTabLinks = () => {
                tabLinks.forEach(link => {
                    link.classList.remove('active-tab');
                    link.classList.remove('bg-gradient-to-r', 'from-tab-active-start', 'to-tab-active-end'); // Supprime le dégradé
                    link.classList.add('text-text-dark'); // Texte sombre par défaut pour l'onglet inactif
                    // Le hover est géré par la classe CSS .tab-link:not(.active-tab):hover
                });
            };

            // Gère le clic sur les liens d'onglet
            tabLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault(); // Empêche le comportement par défaut du lien

                    const targetId = link.dataset.target; // Récupère l'ID de la section cible
                    const targetSection = document.getElementById(targetId);

                    // Si la section cible est déjà affichée, ne rien faire
                    if (!targetSection.classList.contains('hidden') && targetSection.style.opacity === '1') {
                        return;
                    }

                    hideAllSections(); // Masque toutes les sections (avec fade-out)
                    deactivateAllTabLinks(); // Désactive tous les liens d'onglet

                    // Petite temporisation pour permettre le fade-out de la section précédente
                    setTimeout(() => {
                        // Affiche la section cible et la fait apparaître avec fade-in
                        targetSection.classList.remove('hidden');
                        targetSection.style.opacity = '0'; // Définit l'opacité à 0 avant de la faire apparaître
                        // Force le navigateur à appliquer le style d'opacité avant la transition
                        void targetSection.offsetWidth;
                        targetSection.style.opacity = '1'; // Déclenche le fade-in

                        // Active le style de l'onglet cliqué
                        link.classList.add('active-tab');
                        link.classList.add('bg-gradient-to-r', 'from-tab-active-start', 'to-tab-active-end'); // Ajoute le dégradé
                        link.classList.add('text-text-dark'); // Le texte de l'onglet actif sera noir

                        // Défile vers la section affichée (optionnel, si le contenu est long)
                        targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }, 300); // Attendre que le fade-out de l'ancienne section soit terminé
                });
            });

            // Active l'onglet "Introduction" au chargement initial
            const initialTabLink = document.querySelector('.tab-link[data-target="introduction-section"]');
            if (initialTabLink) {
                initialTabLink.click();
            }

            // --- Fonctionnalité Modale Freud ---
            if (openFreudModalButton && freudModal && closeFreudModalButton) {
                openFreudModalButton.addEventListener('click', () => {
                    freudModal.classList.remove('hidden');
                    // Petite temporisation pour déclencher la transition CSS
                    setTimeout(() => {
                        freudModal.classList.add('is-visible');
                    }, 10);
                });

                closeFreudModalButton.addEventListener('click', () => {
                    freudModal.classList.remove('is-visible'); // Déclenche la transition CSS de fermeture
                    // Masque la modale après la fin de la transition
                    setTimeout(() => {
                        freudModal.classList.add('hidden');
                    }, 300); // Correspond à la durée de transition CSS
                });
            }

            // --- Fonctionnalité de Génération du Quiz ---
            generateQuizButton.addEventListener('click', async () => {
                quizContainer.innerHTML = ''; // Efface le quiz précédent
                quizScoreDisplay.classList.add('hidden');
                submitQuizButton.classList.add('hidden');
                quizLoading.classList.remove('hidden'); // Affiche l'indicateur de chargement

                let chatHistory = [];
                const prompt = "Génère un quiz de 5 questions à choix multiples sur l'existentialisme de Sartre et le surréalisme. Chaque question doit avoir 3 options. Pour chaque question, indique la question, les options (tableau de chaînes de caractères) et l'index de la bonne réponse (0 pour la première option, 1 pour la deuxième, etc.). Le score total du quiz sera sur 10 points. Les questions doivent être pertinentes et couvrent différents aspects des deux sujets. Réponds uniquement avec un tableau JSON de questions, comme suit : [{ \"question\": \"Question 1?\", \"options\": [\"Option A\", \"Option B\", \"Option C\"], \"correct_answer_index\": 0 }, ...]";
                chatHistory.push({ role: "user", parts: [{ text: prompt }] });

                const payload = {
                    contents: chatHistory,
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: {
                            type: "ARRAY",
                            items: {
                                type: "OBJECT",
                                properties: {
                                    "question": { "type": "STRING" },
                                    "options": {
                                        "type": "ARRAY",
                                        "items": { "type": "STRING" }
                                    },
                                    "correct_answer_index": { "type": "NUMBER" }
                                },
                                "propertyOrdering": ["question", "options", "correct_answer_index"]
                            }
                        }
                    }
                };

                const apiKey = ""; // Canvas fournira ceci à l'exécution
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const jsonString = result.candidates[0].content.parts[0].text;
                        quizData = JSON.parse(jsonString); // Stocke les données du quiz

                        quizContainer.innerHTML = ''; // Efface le contenu précédent
                        quizData.forEach((q, qIndex) => {
                            const questionDiv = document.createElement('div');
                            questionDiv.classList.add('mb-6', 'p-4', 'bg-gray-50', 'rounded-lg', 'shadow-md');
                            questionDiv.innerHTML = `<p class="font-semibold text-lg mb-3 text-text-dark">Question ${qIndex + 1}: ${q.question}</p>`;

                            q.options.forEach((option, oIndex) => {
                                const optionLabel = document.createElement('label');
                                optionLabel.classList.add('block', 'mb-2', 'cursor-pointer', 'text-text-dark');
                                optionLabel.innerHTML = `
                                    <input type="radio" name="question${qIndex}" value="${oIndex}" class="mr-2 accent-surreal-accent">
                                    ${option}
                                `;
                                questionDiv.appendChild(optionLabel);
                            });
                            quizContainer.appendChild(questionDiv);
                        });
                        submitQuizButton.classList.remove('hidden'); // Affiche le bouton de soumission
                    } else {
                        showMessageBox("Impossible de générer le quiz. Veuillez réessayer.", "error");
                    }
                } catch (error) {
                    console.error("Erreur lors de la génération du quiz:", error);
                    showMessageBox("Une erreur est survenue lors de la génération du quiz. Vérifiez la console pour plus de détails.", "error");
                } finally {
                    quizLoading.classList.add('hidden'); // Masque l'indicateur de chargement
                }
            });

            submitQuizButton.addEventListener('click', () => {
                let score = 0;
                const totalQuestions = quizData.length;
                const pointsPerQuestion = 10 / totalQuestions; // Le quiz est sur 10 points

                quizData.forEach((q, qIndex) => {
                    const selectedOption = document.querySelector(`input[name="question${qIndex}"]:checked`);
                    if (selectedOption && parseInt(selectedOption.value) === q.correct_answer_index) {
                        score += pointsPerQuestion;
                    }
                });

                quizScoreDisplay.textContent = `Votre score : ${score.toFixed(1)} / 10 points`;
                quizScoreDisplay.classList.remove('hidden');
                showMessageBox("Quiz soumis ! Votre score est affiché.", "success");
            });
        });


        // --- Générateur de phrase surréaliste ---
        const surrealistStarts = [
            "Une horloge fondue s'épanouit",
            "Le cri silencieux d'une porte entrouverte",
            "Le papillon des cavernes murmure",
            "Sous le regard d'un œil géant",
            "La main de l'invisible caresse",
            "Les escaliers du souvenir s'effondrent"
        ];
        const surrealistMiddles = [
            "sur le dos d'une girafe endormie",
            "à travers un miroir brisé de certitudes",
            "dans le jardin des pensées oubliées",
            "où les rêves tissent des constellations",
            "et les ombres dansent la symphonie",
            "près du puits où la lune se maquille"
        ];
        const surrealistEnds = [
            "le vent s'habille de silence.",
            "la vérité est une illusion d'optique.",
            "l'absurde devient la seule logique.",
            "un cadenas rouillé garde le secret du temps.",
            "le reflet du soleil se noie dans l'encre.",
            "le vertige des possibles efface l'horizon."
        ];

        document.getElementById('generateSurrealistSentence').addEventListener('click', () => {
            const start = surrealistStarts[Math.floor(Math.random() * surrealistStarts.length)];
            const middle = surrealistMiddles[Math.floor(Math.random() * surrealistMiddles.length)];
            const end = surrealistEnds[Math.floor(Math.random() * surrealistEnds.length)];
            document.getElementById('surrealistOutput').textContent = `${start} ${middle}, ${end}`;
        });

        // --- Réflexion Existentialiste ---
        const sartreQuotes = [
            "L'existence précède l'essence et dans la liberté, l'homme se fait.",
            "L'homme est condamné à être libre : condamné, parce qu'il ne s'est pas créé lui-même, et par ailleurs cependant libre, parce qu'une fois jeté dans le monde, il est responsable de tout ce qu'il fait.",
            "Il n'y a pas de réalité autre que dans l'action.",
            "L'enfer, c'est les autres."
        ];

        document.getElementById('reflectSartre').addEventListener('click', () => {
            const reflectionInput = document.getElementById('sartreReflectionInput').value;
            const sartreQuoteOutput = document.getElementById('sartreQuoteOutput');

            if (reflectionInput.trim() === "") {
                showMessageBox("Écris quelque chose sur la liberté pour voir une citation de Sartre !", "info");
                sartreQuoteOutput.classList.add('hidden');
            } else {
                const randomQuote = sartreQuotes[Math.floor(Math.random() * sartreQuotes.length)];
                sartreQuoteOutput.textContent = `« ${randomQuote} »`;
                sartreQuoteOutput.classList.remove('hidden');
                // Optional: We could send the user's reflection to an imaginary "server" here.
                showMessageBox("Merci pour ta réflexion ! Voici une pensée de Sartre.", "success");
            }
        });
    </script>
</body>
</html>
